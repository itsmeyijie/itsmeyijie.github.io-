{"meta":{"title":"St.Mary Mead","subtitle":"世间好物不坚牢,彩云易散琉璃碎","description":"I am a undergraduate student in Harbin Institute of Technology, majoring in Computer Science. My interests lie in Artificial Intelligence, Internet of Things and Cyber-Physical System. Besides, I love reading, traveling and photographing. This is my personal blog, where I want to share some thoughts and practice my writing.","author":"Yang Yijie","url":"http://yoursite.com","root":"/"},"pages":[],"posts":[{"title":"Hello World","slug":"hello-world","date":"2019-12-30T12:29:47.214Z","updated":"2019-12-30T12:29:47.215Z","comments":true,"path":"2019/12/30/hello-world/","link":"","permalink":"http://yoursite.com/2019/12/30/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"Neural Networks Basics","slug":"Neural-Networks-Basics","date":"2019-09-23T07:49:56.000Z","updated":"2019-09-23T08:01:48.145Z","comments":true,"path":"2019/09/23/Neural-Networks-Basics/","link":"","permalink":"http://yoursite.com/2019/09/23/Neural-Networks-Basics/","excerpt":"","text":"m training example $\\overbrace{a+b+c+d}^{2.0}$ $$ $$ $\\alpha$","categories":[],"tags":[{"name":"deep learning","slug":"deep-learning","permalink":"http://yoursite.com/tags/deep-learning/"}]},{"title":"computer vision (1)","slug":"computer-vision-1","date":"2019-09-23T07:29:49.000Z","updated":"2019-09-23T07:39:09.058Z","comments":true,"path":"2019/09/23/computer-vision-1/","link":"","permalink":"http://yoursite.com/2019/09/23/computer-vision-1/","excerpt":"","text":"This is the class note of CNN by Andrew Ng computer vision problems : image classification, object detection, neural style transfer","categories":[],"tags":[{"name":"computer vision","slug":"computer-vision","permalink":"http://yoursite.com/tags/computer-vision/"}]},{"title":"The story of Geraldine and Jane","slug":"The-story-of-Geralding-and-Jane","date":"2019-09-10T08:22:24.000Z","updated":"2019-09-13T10:57:08.105Z","comments":true,"path":"2019/09/10/The-story-of-Geralding-and-Jane/","link":"","permalink":"http://yoursite.com/2019/09/10/The-story-of-Geralding-and-Jane/","excerpt":"","text":"Recently I have read The Common Reader written by Virginia Woolf, who is definitely my favorite foreign writer. I think I will write many articles about her works to show how I love her books. As for stream of consciousness, there are lots of great writers, such as James Joyce and William Faulkner. I also like their works. But Woolf is so different among them. Her imagination, her talent, her sarcasm, make her so brilliant and incomparable. But today, I just want to share one of her short literary reviews Geraldine and Jane, collected in The Common Reader. Geraldine and Jane were both writers in Victorian era, when women were restrained by many social custom and dogma. Widely recognised as one of the greatest female letter writers in English, Jane Welsh Carlyle (1801-1866) possessed a famous sense of wit and irony, which, together with her keen observational skills, made her an important literary figure in her own right. She was metropolitan and brilliant and deeply versed in life, but as she devoted herself to more to her family (her husband was the famous philosopher and satirical writer Thomas Carlyle), she began to be lazy in think and concentrated more on her family. These sentences in this article deeply impressed me.","categories":[{"name":"Reading Notes","slug":"Reading-Notes","permalink":"http://yoursite.com/categories/Reading-Notes/"}],"tags":[{"name":"Virginia Woolf","slug":"Virginia-Woolf","permalink":"http://yoursite.com/tags/Virginia-Woolf/"}]},{"title":"使用物联网架构平台OneNET实现一个小型CPS系统","slug":"OneNET","date":"2019-09-08T08:47:20.000Z","updated":"2019-09-08T13:37:37.949Z","comments":true,"path":"2019/09/08/OneNET/","link":"","permalink":"http://yoursite.com/2019/09/08/OneNET/","excerpt":"","text":"原理1.cc3200连接OneNET云平台OneNET支持的用户通过TCP透传的方式上传数据，为任何协议设备接入OneNET提供了可行性。设备通过TCP连接接入OneNET，认证成功后即可与OneNET之间进行数据交互，OneNET通过用户上传的自定义脚本来实现对设备上传数据的解析以及向设备下发数据。 功能特点 长连接 用户自定义脚本，仅支持lua 高灵活性 支持一个连接传输多个设备数据 TCP透传的高灵活性决定了它不受约束，它主要适用于用户自定义协议的情况，可以根据自身定义的脚本完成任何协议的交互，并且支持脚本的随时修改随时上传。协议支持一个连接传输多个设备数据，可以集中的下挂多个设备进行数据上传与下发。在智能电表、智能水表等智能仪表领域有广泛的应用。 物联网平台的具体接入方法 见官方文档 OneNET TCP接入说明 2.I2C接口应用 温度传感器和 加速度传感器内部集成电路总线接口I2C是通信控制领域广泛采用的一种总线标准，用于连接微控制器和外围设备。 I2C使用一根双向串行数据线SDA和一根双向串行时钟线SCL实现主/从设备间的多主串行通信。 CC3200通过I2C接口 与温度传感器TMP006和加速度传感器BMA222进行通信，两者的器件地址分别是0X41和0x18。 I2C的使用主要包括引脚复用配置，初始化I2C和I2C操作等，I2C操作包括I2C写 I2C_IF_Write()和I2C_IF_Read()。 TMP006的温度值用14位(15:2)补码表示，第15位是符号位(0表示正，1表示负)，第14：7位是8位整数部分，第6：2位是5位小数部分。 加速度的测量是使用加速度传感器BMA222实现，BMA222内部寄存器有64个。其中0x03里面是x轴加速度数据寄存器，0x05是y轴加速度寄存器，0x07是z轴加速度寄存器。 3.ADC和烟雾传感器烟雾传感器的电路为： Vrl接ADC 可以计算： 然后通过datasheet查表获得气体的浓度。 实验环境Code Composer Studio Version: 9.0.1.00040 硬件环境基于CC3200开发板和G2实验平台，外置传感器有PM2.5、GPS、烟雾气体传感器，板载传感器包括温度、加速度等，也可以包括其它传感器。 软件环境TI的CCS以及TI提供的相关开发组件 代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137int BsdTcpClient(unsigned short usPort) &#123; int iCounter, q; short sTestBufLen, sTestBufLen1; SlSockAddrIn_t sAddr; int iAddrSize; int iSockID; int iStatus; long lLoopCount = 0; int iRetVal1, iRetVal2; unsigned char tempData[2]; //温度 unsigned char ucData[6]; //加速度 tempData[0] = 1; ucData[0] = 2; I2C_IF_Write(0x41, &amp;tempData[0], 1, 0); //地址指向温度寄存器 I2C_IF_Write(0x18, &amp;ucData[0], 1, 0); //地址指向温度寄存器 char* g_cBsdBuf1 = \"*251510#1111#test*\"; char g_cBsdBuf2[18] = &#123; \"\" &#125;; char* g_cBsdBuf3; char a[2]; char b[2]; char c[3]; char d[3]; char e[3]; char f[4]; sTestBufLen = strlen(g_cBsdBuf2); sTestBufLen1 = strlen(g_cBsdBuf1); //filling the TCP server socket address sAddr.sin_family = SL_AF_INET; sAddr.sin_port = sl_Htons((unsigned short) usPort); sAddr.sin_addr.s_addr = sl_Htonl((unsigned int) g_ulDestinationIp); iAddrSize = sizeof(SlSockAddrIn_t); // creating a TCP socket iSockID = sl_Socket(SL_AF_INET, SL_SOCK_STREAM, 0); if (iSockID &lt; 0) &#123; ASSERT_ON_ERROR(SOCKET_CREATE_ERROR); &#125; // connecting to TCP server iStatus = sl_Connect(iSockID, (SlSockAddr_t *) &amp;sAddr, iAddrSize); if (iStatus &lt; 0) &#123; // error sl_Close(iSockID); ASSERT_ON_ERROR(CONNECT_ERROR); &#125; iStatus = sl_Send(iSockID, g_cBsdBuf1, sTestBufLen1, 0); if (iStatus &lt; 0) &#123; // error sl_Close(iSockID); ASSERT_ON_ERROR(SEND_ERROR); Report(\"noooooooo\"); &#125; else sl_Send(iSockID, g_cBsdBuf1, sTestBufLen1, 0); while (true) &#123; memset(g_cBsdBuf2, 0, sizeof(g_cBsdBuf2)); iCounter = 0; // g_cBsdBuf2 = \"\"; while (iCounter &lt;= 10000) iCounter++; iRetVal1 = I2C_IF_Read(0x41, &amp;tempData[0], 2); //读取温度值 if (!iRetVal1) &#123; unsigned short usTemp = (tempData[0] &lt;&lt; 8) + tempData[1]; if (!(usTemp &amp; 0x8000)) &#123; Report(\"temperature is: %d.\", usTemp &gt;&gt; 7); //显示整数部分 Report(\"%02dC \\n\\r\", ((usTemp &amp; 0x7f) * 25) &gt;&gt; 5); //显示小数部分 sprintf(a, \"%d\", usTemp &gt;&gt; 7); strcat(g_cBsdBuf2, a); strcat(g_cBsdBuf2, \".\"); sprintf(b, \"%02d\", ((usTemp &amp; 0x7f) * 25) &gt;&gt; 5); strcat(g_cBsdBuf2, b); &#125; &#125; iRetVal2 = I2C_IF_Read(0x18, &amp;ucData[0], 6); //读取加速度 if (!iRetVal2) &#123; Report(\"x: %03d \", ucData[1]); Report(\"y: %03d \", ucData[3]); Report(\"z: %03d\\n\\r\", ucData[5]); sprintf(c, \"%03d\", ucData[1]); strcat(g_cBsdBuf2, c); sprintf(d, \"%03d\", ucData[3]); strcat(g_cBsdBuf2, d); sprintf(e, \"%03d\", ucData[5]); strcat(g_cBsdBuf2, e); if (ucData[1] &gt; 100 | ucData[2] &gt; 100 | ucData[3] &gt; 100) &#123; //如果加速度超过阈值，则LED上红灯闪烁十次 for (q = 0; q &lt; 10; q++) &#123; MAP_GPIOPinWrite(GPIOA1_BASE, 2, 2); MAP_UtilsDelay(8000000); MAP_GPIOPinWrite(GPIOA1_BASE, 2, 0); MAP_UtilsDelay(8000000); &#125; &#125; &#125; //////////////// while (uiIndex &lt; NO_OF_SAMPLES + 4) &#123; if (MAP_ADCFIFOLvlGet(ADC_BASE, uiChannel)) &#123; ulSample = MAP_ADCFIFORead(ADC_BASE, uiChannel); pulAdcSamples[uiIndex++] = ulSample; &#125; &#125; MAP_ADCChannelDisable(ADC_BASE, uiChannel); uiIndex = 0; float mq135; //烟雾传感器接ADC 输出电压值 mq135 = (((float)((pulAdcSamples[4+uiIndex] &gt;&gt; 2 ) &amp; 0x0FFF))*1.4)/4096; g_cBsdBuf3 = g_cBsdBuf2; strcat(g_cBsdBuf3, mq135); UART_PRINT(\"Voltage is %s\\n\\r\",f); sl_Send(iSockID, g_cBsdBuf3, strlen(g_cBsdBuf3), 0); //发送数据 Report(\"send data: %s\", g_cBsdBuf3); MAP_UtilsDelay(20000000); //延时约0.6s &#125; Report(\"Sent %u packets successfully\\n\\r\", g_ulPacketCount); iStatus = sl_Close(iSockID); //closing the socket after sending 1000 packets ASSERT_ON_ERROR(iStatus); return SUCCESS; &#125; 结果分析5.结果分析 在OneNET云平台上展示采集的数据，有温度，烟雾传感器的电压值，x,y,z轴的加速度 移动开发板，可以看见各坐标轴加速度的变化： 设计的效果是如果x,y,z轴的加速度变化（模拟家门的开关），如果是晚上人们休息之后门被打开则说明可能是有小偷进入，则开启警报（这里的执行机构是使开发板上的红灯闪烁十次）","categories":[{"name":"IOT","slug":"IOT","permalink":"http://yoursite.com/categories/IOT/"}],"tags":[{"name":"OneNET","slug":"OneNET","permalink":"http://yoursite.com/tags/OneNET/"}]}]}